(()=>{"use strict";var e=document.querySelector(".popup_type_image"),t=e.querySelector(".popup__image"),n=e.querySelector(".popup__caption"),r=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",o)},i=function(e){e.classList.add("popup_is-opened"),document.addEventListener("keyup",o)},o=function(e){e.preventDefault(),u(e,r)},u=function(e,t){27===e.which&&t(document.querySelector(".popup_is-opened"))};function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===s(i)?i:String(i)),r)}var i}const a=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._text=e.name,this._link=e.link,this._cardSelector=t}var o,u;return o=r,(u=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__like-button").addEventListener("click",(function(){return e._handleLikeIcon()})),this._element.querySelector(".card__delete-button").addEventListener("click",(function(){return e._handleDeleteCard()})),this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handlePreviewPicture()}))}},{key:"_handleLikeIcon",value:function(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_is-active")}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_handlePreviewPicture",value:function(){t.src=this._link,t.alt="Изображение ".concat(this._link),n.textContent=this._text,i(e)}},{key:"getView",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".card__title").textContent=this._text,this._element}}])&&l(o.prototype,u),Object.defineProperty(o,"prototype",{writable:!1}),r}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function _(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}const m=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"disableSubmitButton",(function(){r._buttonElement.classList.add(r._inactiveButtonClass),r._buttonElement.disabled=!0})),_(this,"_enableSubmitButton",(function(){r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.disabled=!1})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._element=n}var t,n;return t=e,(n=[{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._element.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._element.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_toggleButtonState",value:function(){this._getInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}},{key:"_getInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._element.querySelectorAll(this._inputSelector)),this._buttonElement=this._element.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._element.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var y=document.querySelector(".places__list"),f=document.querySelector(".popup_type_edit"),v=document.querySelector(".popup_type_new-card"),h=document.querySelector(".popup_type_image"),b=document.querySelector(".profile__edit-button"),S=document.querySelector(".profile__add-button"),k=document.querySelector(".profile__title"),g=document.querySelector(".profile__description"),E=f.querySelector(".popup__input_type_name"),L=f.querySelector(".popup__input_type_description"),q=v.querySelector(".popup__input_type_card-name"),C=v.querySelector(".popup__input_type_url"),w={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},x=new m(w,f),B=new m(w,v);x.enableValidation(),B.enableValidation();var j=function(e,t){var n=function(e){return new a(e,".card-template").getView()}(e);t.prepend(n)};f.addEventListener("submit",(function(e){e.preventDefault(),k.textContent=E.value,g.textContent=L.value,r(f)})),v.addEventListener("submit",(function(e){e.preventDefault(),j({name:q.value,link:C.value},y),r(v),q.value="",C.value=""})),b.addEventListener("click",(function(){E.value=k.textContent,L.value=g.textContent,i(f)})),S.addEventListener("click",(function(){B.disableSubmitButton(),i(v)})),f.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&r(f)})),v.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&r(v)})),h.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&r(h)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){j(e,y)}))})();